# Theme Expansion Plan

## Overview

This document outlines the plan to expand the theme system from 5 themes to 13 themes, providing comprehensive coverage and better filtering granularity for the ContentBrowser and other content management features. The expansion covers business/economic aspects, technology/training, culture/fandom, and advanced analysis while maintaining clarity and manageability.

## Current State

### Existing Themes (5)
1. **Players** - Individual players, personal achievements, player statistics
2. **Teams & Organizations** - Teams, franchises, organizational content
3. **Venues & Locations** - Venues, arenas, geographic locations
4. **Awards & Honors** - Awards, trophies, recognition, achievements
5. **Leadership & Staff** - Coaches, management, leadership, mentorship

### Current Categories by Theme
- **Players**: Player Spotlight, Sharpshooters, Net Minders, Icons, Captains, Hockey is Family
- **Teams & Organizations**: Stanley Cup Playoffs, NHL Draft, Free Agency, Game Day, Hockey Nations, All-Star Game, Heritage Classic, Management
- **Venues & Locations**: Stadium Series, Global Series
- **Awards & Honors**: NHL Awards, Milestones
- **Leadership & Staff**: Coaching, Management, Front Office

## Proposed New Themes

### üíº Business, Economics, & Management (3 new themes)

1. **Business & Finance**
   - Description: Economics of the sport - salaries, contracts, collective bargaining agreements (CBAs), team valuations, league revenue sharing, financial health
   - Use when: Content covers financial aspects, contracts, business operations, economics
   - Examples: Player contracts, salary cap, revenue sharing, team valuations, CBA negotiations

2. **Media, Broadcasting, & E-Sports**
   - Description: How the game is consumed - TV deals, streaming services, sports journalism (traditional and social), ice hockey e-sports and video games
   - Use when: Content is about media coverage, broadcasting, journalism, e-sports, video games
   - Examples: TV broadcasting deals, streaming platforms, sports journalism, hockey video games, e-sports tournaments

3. **Marketing, Sponsorship, & Merchandising**
   - Description: Commercial side of the sport - jersey/equipment deals, fan apparel, team/player endorsements, in-arena advertising
   - Use when: Content covers marketing, sponsorships, merchandise, endorsements, advertising
   - Examples: Jersey sponsorships, equipment deals, player endorsements, team merchandise, arena advertising

### ‚öôÔ∏è Technology, Training, & Performance (2 new themes)

4. **Equipment & Technology**
   - Description: Engineering, design, and innovation of skates, sticks, pads, helmet safety, ice maintenance technology, video review systems
   - Use when: Content focuses on equipment design, technology innovation, gear engineering
   - Examples: Skate technology, stick design, helmet safety, ice maintenance systems, video review technology

5. **Training, Health, & Wellness**
   - Description: Science of performance - off-season training, nutrition, sports psychology, injury prevention and recovery, player fitness routines. Also includes youth development programs and junior leagues.
   - Use when: Content covers training methods, health, wellness, nutrition, psychology, injury management, youth development
   - Examples: Off-season training programs, nutrition plans, sports psychology, injury prevention, recovery protocols, youth leagues, development programs

### üåé Culture, Fandom, & Community (2 new themes)

6. **Fandom & Fan Culture**
   - Description: Content centered on supporters - tailgating, fan traditions, unique chants, rivalry history from fan perspective, community/watch parties
   - Use when: Content is about fans, fan experiences, traditions, community events
   - Examples: Fan traditions, tailgating, watch parties, fan chants, rivalry culture, community events

7. **Social Impact & Diversity**
   - Description: Role of hockey in society - diversity, inclusion (gender, race, sexual orientation), charitable initiatives, environmental impact, sport's role in local communities
   - Use when: Content addresses social issues, diversity, inclusion, community impact, charitable work
   - Examples: Diversity initiatives, inclusion programs, charitable foundations, environmental impact, community outreach

### üèí Advanced Analysis & Strategy (1 new theme)

8. **Tactics & Advanced Analytics**
   - Description: In-depth analysis separate from general gameplay - coaching systems, forechecking schemes, special teams strategies, micro-stats (Corsi, Fenwick, xG), detailed breakdowns of play execution. Also covers rules, regulations, and gameplay mechanics.
   - Use when: Content provides deep tactical analysis, advanced statistics, strategic breakdowns, rules explanations
   - Examples: Forechecking systems, power play strategies, advanced metrics (Corsi, Fenwick), tactical analysis, play breakdowns, rules explanations

### Refined Existing Themes

**Teams & Organizations** (expanded scope)
- Description: Teams, franchises, organizational structure, team operations, events, tournaments, competitions
- Use when: Content is about teams/franchises as entities, events, tournaments, competitions
- Categories include: Stanley Cup Playoffs, NHL Draft, All-Star Game, Heritage Classic, Free Agency, Game Day, Hockey Nations

**Players** (expanded scope)
- Description: Individual players, personal achievements, player statistics, records, historical player content
- Use when: Content focuses on players, their statistics, records, historical achievements
- Categories include: Player Spotlight, Sharpshooters, Net Minders, Icons, Captains, Hockey is Family, Statistics & Records

**Awards & Honors** (expanded scope)
- Description: Awards, trophies, recognition, achievements, historical moments, heritage, legacy content
- Use when: Content covers awards, achievements, historical events, traditions, legacy
- Categories include: NHL Awards, Milestones, Historical Events, Traditions, Legacy Content

## Complete Theme List (13 Themes)

### Core Themes (5 existing, refined)
1. **Players** - Individual players, personal achievements, player statistics, records, historical player content
2. **Teams & Organizations** - Teams, franchises, organizational content, events, tournaments, competitions
3. **Venues & Locations** - Venues, arenas, geographic locations
4. **Awards & Honors** - Awards, trophies, recognition, achievements, historical moments, heritage, legacy
5. **Leadership & Staff** - Coaches, management, leadership, mentorship

### üíº Business, Economics, & Management (3 new)
6. **Business & Finance** - Economics, contracts, CBAs, valuations, revenue sharing (NEW)
7. **Media, Broadcasting, & E-Sports** - TV deals, streaming, journalism, e-sports, video games (NEW)
8. **Marketing, Sponsorship, & Merchandising** - Sponsorships, endorsements, merchandise, advertising (NEW)

### ‚öôÔ∏è Technology, Training, & Performance (2 new)
9. **Equipment & Technology** - Equipment design, innovation, technology systems (NEW)
10. **Training, Health, & Wellness** - Training, nutrition, psychology, injury prevention, youth development (NEW)

### üåé Culture, Fandom, & Community (2 new)
11. **Fandom & Fan Culture** - Fan experiences, traditions, community events (NEW)
12. **Social Impact & Diversity** - Diversity, inclusion, charitable work, community impact (NEW)

### üèí Advanced Analysis & Strategy (1 new)
13. **Tactics & Advanced Analytics** - Tactical analysis, advanced metrics, strategic breakdowns, rules & gameplay (NEW)

## Category Reorganization

### Updated Categories by Theme

**Players** (expanded)
- Player Spotlight
- Sharpshooters
- Net Minders
- Icons
- Captains
- Hockey is Family
- Statistics & Records
- Career Achievements

**Teams & Organizations** (expanded)
- Stanley Cup Playoffs
- NHL Draft
- Free Agency
- Game Day
- Hockey Nations
- All-Star Game
- Heritage Classic
- International Tournaments
- Olympics

**Venues & Locations** (unchanged)
- Stadium Series
- Global Series

**Awards & Honors** (expanded)
- NHL Awards
- Milestones
- Historical Events
- Traditions
- Legacy Content

**Leadership & Staff** (unchanged)
- Coaching
- Management
- Front Office

**Tactics & Advanced Analytics** (NEW)
- Coaching Systems
- Tactical Analysis
- Advanced Metrics
- Strategy Breakdowns
- Performance Analysis
- Game Rules
- Penalties & Infractions
- Officiating

**Business & Finance** (NEW)
- Contracts & Salaries
- Collective Bargaining
- Team Valuations
- Revenue Sharing
- Financial Operations

**Media, Broadcasting, & E-Sports** (NEW)
- Broadcasting & TV
- Streaming Services
- Sports Journalism
- E-Sports
- Video Games

**Marketing, Sponsorship, & Merchandising** (NEW)
- Sponsorships
- Endorsements
- Merchandise
- Advertising
- Brand Partnerships

**Equipment & Technology** (NEW)
- Equipment Design
- Technology Innovation
- Safety Technology
- Ice Maintenance
- Video Review Systems

**Training, Health, & Wellness** (NEW)
- Training Programs
- Nutrition
- Sports Psychology
- Injury Prevention
- Recovery & Rehabilitation
- Youth Leagues
- Development Programs
- Junior Hockey

**Fandom & Fan Culture** (NEW)
- Fan Traditions
- Community Events
- Watch Parties
- Rivalry Culture
- Fan Experiences

**Social Impact & Diversity** (NEW)
- Diversity & Inclusion
- Charitable Initiatives
- Community Outreach
- Environmental Impact
- Social Programs

**Tactics & Advanced Analytics** (NEW)
- Coaching Systems
- Tactical Analysis
- Advanced Metrics
- Strategy Breakdowns
- Performance Analysis

## Files That Need Updates

### 1. Type Definitions & Validators
- **File**: `apps/cms/src/lib/sourcing/validators.ts`
  - Update `THEMES` constant array
  - Update `CATEGORY_BY_THEME` mapping
  - Update `ThemeValue` type

### 2. Database Schema
- **File**: `sql/migrations/migration_YYYYMMDD_expand_themes.sql` (new migration)
  - Update CHECK constraint on `theme` field in `source_content_ingested` table
  - Update CHECK constraint on `category` field to include new categories
  - Add indexes if needed

### 3. TypeScript Types
- **File**: `apps/cms/src/lib/ideation/types.ts`
  - Update `IdeationTheme` type definition

### 4. API Route
- **File**: `apps/cms/src/app/api/content-browser/route.ts`
  - Update `THEME_ORDER` array
  - Update `normalizeTheme` function

### 5. Documentation
- **File**: `docs/source-content-metadata-definitions.md`
  - Update theme definitions section
  - Add new theme descriptions and guidelines
  - Update examples

- **File**: `docs/sourcing-workflow-database-structure.md`
  - Update theme CHECK constraint documentation
  - Update category lists

### 6. UI Components
- **File**: `apps/cms/src/components/ideation/ContentBrowser.tsx`
  - No changes needed (dynamically displays themes from API)

- **File**: Any theme selector components
  - Update to include new themes

## Migration Strategy

### Phase 1: Database Migration
1. Create migration script to:
   - Update `theme` CHECK constraint to include new themes
   - Update `category` CHECK constraint to include new categories
   - Add new indexes if needed

### Phase 2: Code Updates
1. Update validators and type definitions
2. Update API routes
3. Update documentation

### Phase 3: Content Migration (if needed)
1. Identify existing content that should be reclassified
2. Create migration script to update theme assignments:
   - Move "Stanley Cup Playoffs" content from "Teams & Organizations" ‚Üí "Events & Tournaments"
   - Move "NHL Draft" content from "Teams & Organizations" ‚Üí "Events & Tournaments"
   - Move statistical content to "Statistics & Records" if appropriate
   - Move historical content to "History & Heritage" if appropriate

### Phase 4: AI Prompt Updates
1. Update `metadata_extraction` prompt in `ai_extraction_prompts` table
2. Include new theme definitions and examples
3. Test with sample content to ensure proper classification

### Phase 5: Testing
1. Test theme validation
2. Test category validation
3. Test ContentBrowser filtering
4. Test ingestion pipeline with new themes
5. Verify AI correctly classifies content into new themes

## Implementation Steps

### Step 1: Create Migration Script
```sql
-- Migration: Expand themes from 5 to 10
-- File: sql/migrations/migration_YYYYMMDD_expand_themes.sql

-- Step 1: Drop existing constraint
ALTER TABLE source_content_ingested 
DROP CONSTRAINT IF EXISTS theme_check;

-- Step 2: Add new constraint with expanded themes (13 themes total)
ALTER TABLE source_content_ingested
ADD CONSTRAINT theme_check CHECK (
  theme IN (
    -- Core Themes (5)
    'Players',
    'Teams & Organizations',
    'Venues & Locations',
    'Awards & Honors',
    'Leadership & Staff',
    -- Business, Economics, & Management (3)
    'Business & Finance',
    'Media, Broadcasting, & E-Sports',
    'Marketing, Sponsorship, & Merchandising',
    -- Technology, Training, & Performance (2)
    'Equipment & Technology',
    'Training, Health, & Wellness',
    -- Culture, Fandom, & Community (2)
    'Fandom & Fan Culture',
    'Social Impact & Diversity',
    -- Advanced Analysis & Strategy (1)
    'Tactics & Advanced Analytics'
  )
);

-- Step 3: Update category constraint (add new categories)
-- (Detailed category updates to be included)
```

### Step 2: Update TypeScript Validators
- Update `THEMES` array in `validators.ts`
- Update `CATEGORY_BY_THEME` mapping
- Ensure all validation logic works with new themes

### Step 3: Update Type Definitions
- Update `IdeationTheme` type in `types.ts`
- Ensure type safety across codebase

### Step 4: Update API Routes
- Update `THEME_ORDER` array
- Update `normalizeTheme` function
- Test API responses

### Step 5: Update Documentation
- Update all theme-related documentation
- Add examples for new themes
- Update guidelines

### Step 6: Update AI Prompts
- Update metadata extraction prompt
- Add examples for new themes
- Test classification accuracy

### Step 7: Content Migration (Optional)
- Create script to reclassify existing content
- Run migration on existing records
- Verify results

## Testing Checklist

- [ ] Database migration runs successfully
- [ ] Theme validation works for all 13 themes
- [ ] Category validation works for all categories
- [ ] ContentBrowser displays all themes correctly
- [ ] ContentBrowser filtering works with new themes
- [ ] Ingestion pipeline accepts new themes
- [ ] AI correctly classifies content into new themes
- [ ] TypeScript types are correct
- [ ] No TypeScript errors
- [ ] Documentation is updated
- [ ] Existing content still accessible

## Rollback Plan

If issues arise:
1. Revert database migration (restore old CHECK constraint)
2. Revert code changes
3. Restore previous AI prompts
4. Verify system returns to previous state

## Timeline Estimate

- **Database Migration**: 30 minutes (13 themes, manageable)
- **Code Updates**: 2-3 hours (13 themes require moderate validation logic)
- **Documentation Updates**: 1.5 hours (comprehensive documentation for all themes)
- **AI Prompt Updates**: 1.5 hours (detailed examples for all 13 themes)
- **Testing**: 2-3 hours (13 themes = manageable test cases)
- **Content Migration (if needed)**: 1-2 hours (consolidated themes may need reclassification)

**Total Estimated Time**: 8-12 hours

## Questions to Consider

1. **Content Migration**: Should we migrate existing content to new themes, or leave it as-is?
2. **AI Prompt**: Who will update the AI prompt? Should we provide a template?
3. **Category Migration**: Should categories like "Stanley Cup Playoffs" automatically move to "Events & Tournaments" theme?
4. **Backward Compatibility**: Do we need to support old theme values temporarily?
5. **UI Order**: What order should themes appear in ContentBrowser? (Suggested: Group by category sections)
6. **Theme Overlap**: How do we handle content that could fit multiple themes? (e.g., "Statistics & Records" category under Players vs "Tactics & Advanced Analytics")
7. **Category Completeness**: Are the proposed categories sufficient for all 13 themes, or do we need more?
8. **AI Classification**: With 13 themes, AI classification should be more accurate than 18. Still need good examples.
9. **Content Consolidation**: Some content may need reclassification (e.g., rules content ‚Üí Tactics & Advanced Analytics, historical content ‚Üí Awards & Honors)

## Next Steps

1. Review and approve this plan
2. Create database migration script
3. Update code files
4. Update documentation
5. Update AI prompts
6. Test thoroughly
7. Deploy changes
8. Monitor for issues

## Theme Organization & Display Order

### Suggested Display Order for ContentBrowser

**Group 1: Core Game Content**
1. Players
2. Teams & Organizations
3. Awards & Honors
4. Venues & Locations
5. Leadership & Staff

**Group 2: Analysis & Performance**
6. Tactics & Advanced Analytics
7. Training, Health, & Wellness
8. Equipment & Technology

**Group 3: Business & Media**
9. Business & Finance
10. Media, Broadcasting, & E-Sports
11. Marketing, Sponsorship, & Merchandising

**Group 4: Culture & Community**
12. Fandom & Fan Culture
13. Social Impact & Diversity

## Notes on Theme Distinctions

### Statistics & Records (category) vs Tactics & Advanced Analytics (theme)
- **Statistics & Records** (category under Players): Focuses on player-specific numbers, records, achievements, milestone tracking
- **Tactics & Advanced Analytics** (theme): Focuses on strategic analysis, tactical systems, advanced metrics for gameplay, rules

### Training, Health, & Wellness (includes Youth Development)
- **Training, Health, & Wellness**: Covers both professional training/health AND youth development programs
- Youth development is now a category under this theme, not a separate theme

### Business & Finance vs Marketing, Sponsorship, & Merchandising
- **Business & Finance**: Focuses on economics, contracts, financial operations, revenue, CBAs
- **Marketing, Sponsorship, & Merchandising**: Focuses on commercial partnerships, branding, merchandise, endorsements

### Historical Content
- Historical player content ‚Üí **Players** theme (with Statistics & Records category)
- Historical events, traditions, legacy ‚Üí **Awards & Honors** theme (with Historical Events, Traditions, Legacy Content categories)

---

**Status**: Approved - Ready for Implementation
**Created**: [Date]
**Last Updated**: [Date]
**Total Themes**: 13 (5 existing + 8 new)

